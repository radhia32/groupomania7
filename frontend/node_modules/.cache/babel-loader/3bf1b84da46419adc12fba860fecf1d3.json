{"ast":null,"code":"var _jsxFileName = \"/Users/zrt/Documents/groupomania7/frontend/src/components/Post.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport Aimer from \"./Aimer\";\nimport Dislike from \"./Dislike\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Post = _ref => {\n  _s();\n\n  let {\n    post,\n    setPosts,\n    posts\n  } = _ref;\n  const [comment, setComment] = useState(\"\");\n  const [aimer, setAimer] = useState([]);\n  const [comments, setComments] = useState([]);\n  useEffect(() => {\n    const getComments = async () => {\n      const commentsResult = await axios.get(`http://localhost:4000/api/comment/${post.postId}/allcomments`, {\n        headers: {\n          authorization: `bearer ${localStorage.getItem(\"TOKEN\")}`\n        }\n      });\n      console.log(\"postResult\", commentsResult);\n      setComments(commentsResult.data.result);\n    };\n\n    getComments();\n  }, []);\n  console.log(\"comments\", comments);\n  const userId = localStorage.getItem(\"USERID\");\n  const userName = localStorage.getItem(\"NAME\");\n  const userLastName = localStorage.getItem(\"LASTNAME\");\n  const userRole = localStorage.getItem(\"ROLE\");\n  console;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: post.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 11\n        }, this), (post.userId == userId || userRole == \"admin\") && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: async () => {\n            const result = await axios.delete(\"http://localhost:4000/api/post/\" + post.postId, {\n              headers: {\n                authorization: `bearer ${localStorage.getItem(\"TOKEN\")}`\n              }\n            });\n            console.log(\"result\", result);\n            const filtredPosts = posts.filter(postItem => postItem.postId !== post.postId);\n            setPosts(filtredPosts);\n          },\n          children: \"delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 60\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        style: {\n          width: \"300px\",\n          height: \"300px\"\n        },\n        src: post.image\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 16\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: comments.map(commentItem => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              justifyContent: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: commentItem.comment\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [commentItem.prenom, \" \", commentItem.nom]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 13\n          }, this), (commentItem.userId == userId || userRole === \"admin\") && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: async () => {\n              const result = await axios.delete(\"http://localhost:4000/api/comment/\" + commentItem.commentId, {\n                headers: {\n                  authorization: `bearer ${localStorage.getItem(\"TOKEN\")}`\n                }\n              });\n              console.log(\"result\", result);\n              const filtredComments = comments.filter(commentElement => commentElement.commentId !== commentItem.commentId);\n              setComments(filtredComments);\n            },\n            children: \"delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 70\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 20\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"inputs-post-commentaire\",\n        placeholder: \"entrer votre commentaire\",\n        onChange: e => setComment(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"buttoncommentaire\",\n        disabled: !comment,\n        onClick: async () => {\n          if (comment) {\n            const newComment = await axios.post(\"http://localhost:4000/api/comment\", {\n              comment,\n              postId: post.postId\n            }, {\n              headers: {\n                authorization: `bearer ${localStorage.getItem(\"TOKEN\")}`\n              }\n            });\n            setComment(\"\");\n            console.log(\"newPost\", newComment.data);\n            const newAddedComment = {\n              comment,\n              commentId: newComment.data.insertId,\n              userId,\n              postId: post.postId,\n              nom: userLastName,\n              prenom: userName\n            };\n            setComments([...comments, newAddedComment]);\n          }\n        },\n        children: \"commenter\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Aimer, {\n        aimer: aimer,\n        setAimer: setAimer,\n        postId: post.postId\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Dislike, {\n        postId: post.postId,\n        isDisabled: !!aimer.find(aimerItem => Number(aimerItem.userId) === Number(userId))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Post, \"ChVFLqjGs4564gOQTJOLBI4xtv8=\");\n\n_c = Post;\nexport default Post;\n\nvar _c;\n\n$RefreshReg$(_c, \"Post\");","map":{"version":3,"sources":["/Users/zrt/Documents/groupomania7/frontend/src/components/Post.jsx"],"names":["React","useEffect","useState","axios","Aimer","Dislike","Post","post","setPosts","posts","comment","setComment","aimer","setAimer","comments","setComments","getComments","commentsResult","get","postId","headers","authorization","localStorage","getItem","console","log","data","result","userId","userName","userLastName","userRole","display","description","delete","filtredPosts","filter","postItem","width","height","image","map","commentItem","justifyContent","prenom","nom","commentId","filtredComments","commentElement","e","target","value","newComment","newAddedComment","insertId","find","aimerItem","Number"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport Aimer from \"./Aimer\";\nimport Dislike from \"./Dislike\";\n\nconst Post = ({ post, setPosts , posts}) => {\n\n  const [comment, setComment] = useState(\"\");\n  const [aimer, setAimer ]= useState([]);\n  const [comments, setComments ]= useState([]);\n\n  useEffect(() => {\n    const getComments = async () => {\n      const commentsResult = await axios.get(`http://localhost:4000/api/comment/${post.postId}/allcomments`, {\n        headers: {\n          authorization: `bearer ${localStorage.getItem(\"TOKEN\")}`\n        }\n      });\n      console.log(\"postResult\", commentsResult);\n      setComments(commentsResult.data.result);\n    };\n    getComments();\n  }, []);\nconsole.log(\"comments\", comments)\n  const userId = localStorage.getItem(\"USERID\");\n  const userName = localStorage.getItem(\"NAME\");\n  const userLastName = localStorage.getItem(\"LASTNAME\");\n  const userRole = localStorage.getItem(\"ROLE\");\n  console\n  return (\n        <div>\n        <div >\n          <div style={{ display: 'flex'}}>\n          <p>{post.description}</p>\n     \n          {(post.userId == userId || userRole==\"admin\") && <button onClick={async () => {\n                const result = await axios.delete(\n                  \"http://localhost:4000/api/post/\" + post.postId,{ headers: {\n                    authorization: `bearer ${localStorage.getItem(\"TOKEN\")}`\n                  }}\n                );\n\n                console.log(\"result\", result);\n                const filtredPosts = posts.filter(\n                  (postItem) => postItem.postId !== post.postId\n                );\n                setPosts(filtredPosts);\n              }}>delete</button>}\n          </div>\n               <img style={{width: \"300px\", height: \"300px\"}} src={post.image} />\n        </div>\n        <div>\n    \n        {comments.map((commentItem) => {\n            return <div>\n            <div style={{ display: \"flex\", justifyContent: 'center'}}>\n                <p>{commentItem.comment}</p>\n                <p>{commentItem.prenom} { commentItem.nom}</p>\n            </div>\n            {(commentItem.userId == userId || userRole===\"admin\") && <button onClick={async () => {\n                const result = await axios.delete(\n                  \"http://localhost:4000/api/comment/\" + commentItem.commentId,{ headers: {\n                    authorization: `bearer ${localStorage.getItem(\"TOKEN\")}`\n                  }}\n                );\n\n                console.log(\"result\", result);\n                const filtredComments = comments.filter(\n                  (commentElement) => commentElement.commentId !== commentItem.commentId\n                );\n                setComments(filtredComments);\n              }}>delete</button>}\n            </div>\n        })}\n        </div>\n        <div style={{ display: 'flex'}}>      \n          <input\n       className=\"inputs-post-commentaire\"\n          placeholder=\"entrer votre commentaire\"\n          onChange={(e) => setComment(e.target.value)}\n        />\n       \n    \n        <button \n         className=\"buttoncommentaire\"\n        disabled={!comment} onClick={async () => {\n            if(comment) {\n                const newComment= await axios.post(\n                 \"http://localhost:4000/api/comment\",\n                 {\n                   comment,\n                   postId: post.postId\n                         },\n                 {\n                   headers: {\n                     authorization: `bearer ${localStorage.getItem(\"TOKEN\")}`\n                   }\n                 }\n               );\n               setComment(\"\")\n               console.log(\"newPost\", newComment.data); \n               const newAddedComment = { comment,commentId: newComment.data.insertId,userId , postId: post.postId, nom: userLastName, prenom: userName};\n\n               setComments([...comments, newAddedComment])\n\n            }\n        }}>commenter</button>\n        </div>\n        <div>\n\n        <Aimer aimer={aimer} setAimer={setAimer} postId={post.postId} />\n     \n          <Dislike postId={post.postId} isDisabled={!!aimer.find((aimerItem) => Number(aimerItem.userId) === Number(userId))} />\n        \n        </div>\n        </div>\n  );\n};\n\nexport default Post;"]},"metadata":{},"sourceType":"module"}